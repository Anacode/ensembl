This document shell describe how id mapping in EnsEMBL is done. 


All idmapping will be based on mapping exons from an old release of our
database to the next. It is assumed that the new and the old release
are available in the schema of the new release and the code of the new
release is used throughout. ( There will not be a DBOLD directory
involved with the idmapping code. )

1. Exon mapping

The basic proceeding is, to try to map all old exons over to the new
golden path.


1.1 Easy exon mapping

The first exons ids mapped to the new database are the ones which keep
their position on the same contig. (No contig version update).

Criteria: any overlap and sensitive handling of splits and merges.
(easier: 50% min overlap gets it )

1.2 New contig version

Some Exons might sit on contigs which are still on the golden path in
the new release, but in a different version. Does any of the new Exons
on this contigs look like the old Exon (exact string match or crossmatch)

Criteria: Crossmatch and 95% sequence identity.
Problem: more than one exon on the same clone is almost identical.
In this case use best match on clone..


1.25 Redundant clone information

Map exons on redundant clones to the new clone covering the same
area.

1.3 Sister Exons

Do we have unmapped Exons in old Genes which have sister Exons which
are mapped? Search for Exons in similar position on the new golden
path. 

Remark on sequence comparison: Use a window around exon sequence to map
intronic sequence as well. Window 50bp around the exons. 


1.6 So far unmapped.

Can we find a >95% sequence match somewhere in the genome?
If not consider this exon not to be mappable.



2. Transcript, Gene mapping

This mapping happens on the basis of the mapped exons. We screen
through the old gene, transcript objects and look if the majority of
their exons were mapped to a corresponding new object. Then the id is
transferred to that object. 

In case of a merger, split or general mix of old objects, we transfer
ids for the biggest number of exons translated from one old to one new
first, then for the second biggest and so on.









 





