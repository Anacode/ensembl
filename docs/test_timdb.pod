=head1 test_timdb

For development purposes, I've made up a test flatfile 'database'.
This allows you to run script in ensembl in timdb mode, which can be
useful if you haven't got an msql installation as well as for
debugging the timdb interface.

The tar is pretty rough there is a pile of stuff that isn't needed
there.  If I get a chance I'll get it down to a minimal set.

=head2 Installation

Installation requires 3 steps.  1) fetching testdata, 2) building dbm
files, 3) telling ensembl where the testdata is.

1) Fetching testdata.

You can pick the testdata up by ftp from:

	ftp://ftp.sanger.ac.uk/pub/th/ensembl/test.tar.gz

Untar it anywhere.  It will create a test/ subdirectory.

2) Building DBM files.

cd to the testdata directory.  You will see some *.dbm.* files.  The
DBM files in TimDB are read using dbmopen and it is likely that the
files provided are binary incompatible/use wrong DBM format for your
machine/both.  To address this I have distributed text based versions
of these files for this small database.

To test if your machine can read these binaries try:

	~/modules.devel/ensembl/scripts/set_dbm.pl -f unfinished_clone.dbm -l 10

If you get a list of clones everything is fine.  Most likely you will
get something else: no clones or some error.  If this is the case do the following:

	rm *.dbm.pag, *.dbm.dir
	~/modules.devel/ensembl/scripts/set_dbm.pl -B

If all is well the script will report a number of DBM file being
created and populated.  Run the test script to confirm that you have
valid DBM files.

3) Tell ensembl where the testdata is.

Get your hostname

	printenv HOST

Edit the file Bio/Ensembl/TimDB/Obj.pm.  Find the line 'ADD NEW
MACHINES HERE'.  Copy the three commented out lines and them uncomment
them to enter the full directory (without the 'test') for the testdata
you have untarred and your hostname.  Provided there are no hostname
clashes, it should be possible to check this code back in to CVS
without breaking anything.  I realise this is a horrible hack, but I
can't think of anything smarter right now!

Make sure you have an uptodate version of ensembl (if you have this
file, you should be ok!).

The test of this is to run the following script:

	perl ../scripts/clone2flat.pl -dbtype timdb -nodna -test | more

With luck you will get the annotation of the default clone dJ271M21 as
EMBL entry AL031983.


=head2 AUTHOR

Tim Hubbard <th@sanger.ac.uk>, 16/12/99
